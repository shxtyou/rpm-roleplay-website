<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Интервью - RPM SMI</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="dark-theme">
    <header class="newspaper-header">
        <div class="container">
            <div class="header-top">
                <div class="header-info">
                    <span class="date" id="current-date"></span>
                    <span class="weather">Онлайн: <span id="online-count">0</span> игроков</span>
                </div>
                <div class="header-actions">
                    <div class="auth-buttons" id="auth-buttons">
                        <a href="login.html" class="auth-btn">Вход</a>
                        <a href="submit-news.html" class="auth-btn secondary">Прислать новость</a>
                    </div>
                    <div class="user-menu" id="user-menu" style="display: none;">
                        <span class="user-name" id="user-name"></span>
                        <a href="profile.html" class="auth-btn">Профиль</a>
                        <a href="admin.html" class="auth-btn" id="admin-link" style="display: none;">Редакция</a>
                        <button onclick="logout()" class="auth-btn secondary">Выйти</button>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()">☀️</button>
                </div>
            </div>
            
            <div class="header-main">
                <div class="logo">
                    <h1 class="newspaper-title">RPM SMI</h1>
                    <p class="newspaper-slogan">Официальные новости штата | Средства Массовой Информации</p>
                </div>
            </div>
            
            <nav class="newspaper-nav">
                <ul>
                    <li><a href="index.html">Главная</a></li>
                    <li><a href="news.html">Все новости</a></li>
                    <li><a href="submit-news.html">Прислать новость</a></li>
                    <li><a href="interviews.html" class="active">Интервью</a></li>
                    <li><a href="polls.html">Опросы</a></li>
                    <li><a href="about.html">О нас</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="container">
        <div class="page-header">
            <h1>Эксклюзивные интервью</h1>
            <p>Беседы с ключевыми фигурами штата RPM. Узнайте, что думают лидеры и известные персонажи</p>
        </div>

        <div class="interviews-content">
            <div class="interviews-actions">
                <button onclick="showInterviewForm()" class="btn btn-primary">Предложить интервью</button>
                <button onclick="showRequestForm()" class="btn btn-secondary">Запросить интервью</button>
            </div>

            <!-- Активные интервью -->
            <section class="active-interviews">
                <h2>Активные интервью</h2>
                <div class="interviews-grid" id="active-interviews">
                    <div class="no-interviews">
                        <h3>Пока нет активных интервью</h3>
                        <p>Будьте первым, кто предложит интересное интервью!</p>
                    </div>
                </div>
            </section>

            <!-- Архив интервью -->
            <section class="interviews-archive">
                <h2>Архив интервью</h2>
                <div class="archive-filters">
                    <select id="interview-filter">
                        <option value="all">Все интервью</option>
                        <option value="politics">Политика</option>
                        <option value="crime">Криминал</option>
                        <option value="society">Общество</option>
                    </select>
                    <select id="interview-sort">
                        <option value="newest">Сначала новые</option>
                        <option value="popular">Сначала популярные</option>
                    </select>
                </div>
                <div class="interviews-list" id="interviews-archive">
                    <!-- Интервью загрузятся через JS -->
                </div>
            </section>

            <!-- Как это работает -->
            <section class="interview-guide">
                <h2>Как устроен процесс интервью?</h2>
                <div class="guide-steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h3>Предложение</h3>
                            <p>Любой желающий может предложить кандидата для интервью или запросить интервью с конкретным человеком</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h3>Согласование</h3>
                            <p>Редакция связывается с предложенной кандидатурой и согласовывает детали интервью</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h3>Проведение</h3>
                            <p>Интервью проводится в удобном формате (текст, голос, видео) с участием нашего журналиста</p>
                        </div>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h3>Публикация</h3>
                            <p>Отредактированное интервью публикуется на сайте с указанием автора и участников</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Модальное окно предложения интервью -->
    <div id="interview-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Предложить интервью</h3>
                <button onclick="closeInterviewModal()" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <form id="interview-form">
                    <div class="form-group">
                        <label for="interview-candidate">Кандидат для интервью *</label>
                        <input type="text" id="interview-candidate" required placeholder="Имя и фамилия персонажа">
                    </div>

                    <div class="form-group">
                        <label for="interview-faction">Фракция кандидата</label>
                        <select id="interview-faction">
                            <option value="">Не указана</option>
                            <option value="Мэрия">Мэрия</option>
                            <option value="СМИ">СМИ</option>
                            <option value="ЦПД">ЦПД</option>
                            <option value="FBI">FBI</option>
                            <option value="Армия">Армия</option>
                            <option value="Университет">Университет</option>
                            <option value="Crips">Crips</option>
                            <option value="Southside Serpents">Southside Serpents</option>
                            <option value="Русская мафия">Русская мафия</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="interview-reason">Почему этого человека стоит опросить? *</label>
                        <textarea id="interview-reason" rows="4" required placeholder="Обоснуйте, почему этот кандидат интересен для интервью..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="interview-questions">Примерные вопросы для интервью</label>
                        <textarea id="interview-questions" rows="4" placeholder="Какие темы было бы интересно затронуть?"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="interview-contact">Ваши контакты для связи *</label>
                        <input type="text" id="interview-contact" required placeholder="Discord, Telegram и т.д.">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Отправить предложение</button>
                        <button type="button" onclick="closeInterviewModal()" class="btn btn-secondary">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Модальное окно запроса интервью -->
    <div id="request-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Запросить интервью</h3>
                <button onclick="closeRequestModal()" class="modal-close">×</button>
            </div>
            <div class="modal-body">
                <form id="request-form">
                    <div class="form-group">
                        <label for="request-target">С кем вы хотите взять интервью? *</label>
                        <input type="text" id="request-target" required placeholder="Ваше имя и фамилия в игре">
                    </div>

                    <div class="form-group">
                        <label for="request-faction">Ваша фракция</label>
                        <select id="request-faction">
                            <option value="">Не указана</option>
                            <option value="Мэрия">Мэрия</option>
                            <option value="СМИ">СМИ</option>
                            <option value="ЦПД">ЦПД</option>
                            <option value="FBI">FBI</option>
                            <option value="Армия">Армия</option>
                            <option value="Университет">Университет</option>
                            <option value="Crips">Crips</option>
                            <option value="Southside Serpents">Southside Serpents</option>
                            <option value="Русская мафия">Русская мафия</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="request-interviewer">Журналист для проведения *</label>
                        <input type="text" id="request-interviewer" required placeholder="Кто будет брать интервью?">
                    </div>

                    <div class="form-group">
                        <label for="request-topics">Темы для обсуждения *</label>
                        <textarea id="request-topics" rows="4" required placeholder="Какие вопросы планируете задать?"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="request-format">Формат интервью *</label>
                        <select id="request-format" required>
                            <option value="">Выберите формат</option>
                            <option value="text">Текстовое (в чате)</option>
                            <option value="voice">Голосовое</option>
                            <option value="video">Видео</option>
                            <option value="mixed">Смешанный</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="request-contact">Ваши контакты *</label>
                        <input type="text" id="request-contact" required placeholder="Discord, Telegram и т.д.">
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Отправить запрос</button>
                        <button type="button" onclick="closeRequestModal()" class="btn btn-secondary">Отмена</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer class="newspaper-footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>RPM SMI</h4>
                    <p>Официальные новости штата</p>
                    <p>Основано в 2024 году</p>
                </div>
                <div class="footer-section">
                    <h4>Участие</h4>
                    <a href="submit-news.html">Прислать новость</a>
                    <a href="interviews.html">Интервью</a>
                    <a href="polls.html">Опросы</a>
                </div>
                <div class="footer-section">
                    <h4>Редакция</h4>
                    <a href="about.html">О нас</a>
                    <a href="contact.html">Контакты</a>
                    <a href="login.html">Вход для сотрудников</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 RPM SMI. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // Функции для работы с интервью
        function showInterviewForm() {
            document.getElementById('interview-modal').style.display = 'flex';
        }

        function closeInterviewModal() {
            document.getElementById('interview-modal').style.display = 'none';
            document.getElementById('interview-form').reset();
        }

        function showRequestForm() {
            document.getElementById('request-modal').style.display = 'flex';
        }

        function closeRequestModal() {
            document.getElementById('request-modal').style.display = 'none';
            document.getElementById('request-form').reset();
        }

        // Обработка форм
        document.getElementById('interview-form').addEventListener('submit', function(e) {
            e.preventDefault();
            submitInterviewProposal();
        });

        document.getElementById('request-form').addEventListener('submit', function(e) {
            e.preventDefault();
            submitInterviewRequest();
        });

        function submitInterviewProposal() {
            const formData = {
                candidate: document.getElementById('interview-candidate').value,
                faction: document.getElementById('interview-faction').value,
                reason: document.getElementById('interview-reason').value,
                questions: document.getElementById('interview-questions').value,
                contact: document.getElementById('interview-contact').value,
                type: 'proposal',
                submittedAt: new Date().toISOString(),
                status: 'pending'
            };

            if (!formData.candidate || !formData.reason || !formData.contact) {
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }

            saveInterviewSubmission(formData);
            showSubmissionSuccess('interview');
            closeInterviewModal();
        }

        function submitInterviewRequest() {
            const formData = {
                target: document.getElementById('request-target').value,
                faction: document.getElementById('request-faction').value,
                interviewer: document.getElementById('request-interviewer').value,
                topics: document.getElementById('request-topics').value,
                format: document.getElementById('request-format').value,
                contact: document.getElementById('request-contact').value,
                type: 'request',
                submittedAt: new Date().toISOString(),
                status: 'pending'
            };

            if (!formData.target || !formData.interviewer || !formData.topics || !formData.format || !formData.contact) {
                alert('Пожалуйста, заполните все обязательные поля');
                return;
            }

            saveInterviewSubmission(formData);
            showSubmissionSuccess('request');
            closeRequestModal();
        }

        function saveInterviewSubmission(formData) {
            let submissions = JSON.parse(localStorage.getItem('interview_submissions') || '[]');
            
            const submission = {
                id: Date.now(),
                ...formData
            };

            submissions.unshift(submission);
            localStorage.setItem('interview_submissions', JSON.stringify(submissions));
        }

        function showSubmissionSuccess(type) {
            const message = type === 'interview' ? 
                'Ваше предложение об интервью отправлено в редакцию!' :
                'Ваш запрос на интервью отправлен в редакцию!';
            
            alert(message + ' Мы свяжемся с вами в ближайшее время.');
        }

        // Загрузка существующих интервью
        function loadInterviews() {
            const interviews = JSON.parse(localStorage.getItem('published_interviews') || '[]');
            const archiveList = document.getElementById('interviews-archive');

            if (interviews.length === 0) {
                archiveList.innerHTML = `
                    <div class="no-interviews">
                        <h3>Архив интервью пуст</h3>
                        <p>Здесь появятся опубликованные интервью с известными личностями штата</p>
                    </div>
                `;
                return;
            }

            archiveList.innerHTML = interviews.map(interview => `
                <article class="interview-item">
                    <div class="interview-header">
                        <div class="interview-category">${interview.category.toUpperCase()}</div>
                        <div class="interview-date">${new Date(interview.publishedAt).toLocaleDateString('ru-RU')}</div>
                    </div>
                    <h3 class="interview-title">${interview.title}</h3>
                    <div class="interview-participants">
                        <strong>Участники:</strong> ${interview.interviewer} берёт интервью у ${interview.interviewee}
                    </div>
                    <p class="interview-excerpt">${interview.excerpt}...</p>
                    <div class="interview-meta">
                        <span class="views">👁️ ${interview.views || 0}</span>
                        <span class="comments">💬 ${interview.comments || 0}</span>
                        <a href="#" class="read-more">Читать интервью →</a>
                    </div>
                </article>
            `).join('');
        }

        document.addEventListener('DOMContentLoaded', loadInterviews);
    </script>

    <style>
        .interviews-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0 3rem 0;
            flex-wrap: wrap;
        }

        .active-interviews, .interviews-archive {
            margin-bottom: 4rem;
        }

        .interviews-grid, .interviews-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .interview-item {
            background: var(--surface);
            padding: 2rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .interview-item:hover {
            transform: translateY(-2px);
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .interview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .interview-category {
            background: var(--primary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .interview-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .interview-title {
            font-size: 1.3rem;
            margin-bottom: 1rem;
            color: var(--text);
            line-height: 1.3;
        }

        .interview-participants {
            color: var(--text-secondary);
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .interview-excerpt {
            color: var(--text);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }

        .interview-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .read-more {
            color: var(--primary);
            text-decoration: none;
            font-weight: bold;
        }

        .read-more:hover {
            text-decoration: underline;
        }

        .no-interviews {
            grid-column: 1 / -1;
            text-align: center;
            padding: 3rem 2rem;
            background: var(--surface);
            border-radius: 8px;
            border: 2px dashed var(--border);
        }

        .no-interviews h3 {
            color: var(--text);
            margin-bottom: 1rem;
        }

        .no-interviews p {
            color: var(--text-secondary);
        }

        .archive-filters {
            display: flex;
            gap: 1rem;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }

        .archive-filters select {
            padding: 0.75rem;
            background: var(--background);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text);
            min-width: 200px;
        }

        .interview-guide {
            background: var(--surface);
            padding: 2.5rem;
            border-radius: 8px;
            border: 1px solid var(--border);
            margin-top: 3rem;
        }

        .guide-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .step {
            display: flex;
            gap: 1.5rem;
            align-items: flex-start;
        }

        .step-number {
            background: var(--primary);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            flex-shrink: 0;
        }

        .step-content h3 {
            color: var(--text);
            margin-bottom: 0.5rem;
        }

        .step-content p {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--surface);
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .modal-header h3 {
            color: var(--text);
            margin: 0;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: var(--primary);
        }

        .modal-body {
            padding: 1.5rem;
        }

        @media (max-width: 768px) {
            .interviews-grid, .interviews-list {
                grid-template-columns: 1fr;
            }
            
            .guide-steps {
                grid-template-columns: 1fr;
            }
            
            .step {
                flex-direction: column;
                text-align: center;
            }
            
            .archive-filters {
                flex-direction: column;
            }
            
            .archive-filters select {
                min-width: auto;
                width: 100%;
            }
        }
    </style>
</body>
</html>